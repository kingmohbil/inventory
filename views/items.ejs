<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title><%= locals.title %></title>
    <link rel="icon" type="image/x-icon" href="../images/items.png" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="../../css/categories-form.css" />
    <script
      src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"
      integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3"
      crossorigin="anonymous"
      defer
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.min.js"
      integrity="sha384-mQ93GR66B00ZXjt0YO5KlohRA5SY2XofN4zfuZxLkoj1gXtW8ANNCe9d5Y3eG5eD"
      crossorigin="anonymous"
      defer
    ></script>
    <link rel="stylesheet" href="../../css/items.css" />
  </head>
  <body>
    <nav
      class="navbar navbar-expand-lg bg-primary sticky-top"
      data-bs-theme="dark"
    >
      <div class="container-fluid">
        <a class="navbar-brand" href="#">Grocery Store</a>
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarNavDropdown"
          aria-controls="navbarNavDropdown"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNavDropdown">
          <ul class="navbar-nav">
            <li class="nav-item">
              <a class="nav-link" aria-current="page" href="/">Home</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/categories">Categories</a>
            </li>
            <li class="nav-item">
              <a class="nav-link active" href="/items">Items</a>
            </li>
          </ul>
        </div>
        <div class="collapse navbar-collapse" id="navbarNavDropdown">
          <ul class="navbar-nav">
            <li class="nav-item">
              <a class="nav-link" href="/forms/item">Add Item</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/forms/category">Add Category</a>
            </li>
          </ul>
        </div>
        <div class="category-number">
          <img src="../images/items.png" alt="item pic" title="category" />
          <a class="category-link" href="/categories">
            <%= locals.items.length || 0 %> Items</a
          >
        </div>
      </div>
    </nav>
    <div class="content">
      <div class="left-side"></div>
      <div class="row row-cols-1 row-cols-md-2 g-4" id="cards-container">
        <% if (locals.items.length > 0 ) { %>
        <!-- prettier-ignore -->
        <% locals.items.forEach( element => { %>
        <div class="col">
          <div class="card h-100">
            <div class="card-body">
              <h5 class="card-title"><%= element.name %></h5>
              <p class="card-text"><%= element.description %></p>
            </div>
            <div class="card-footer">
              <small>Price: <%= element.price %>$</small><br />
              <small>Category: <%= element.category.name %></small><br />
              <small>In Stock: <%= element.number_in_stock %></small>
              <form action="/items/delete/<%= element._id %>" method="POST">
                <center>
                  <button class="btn btn-danger" type="submit">
                    Delete Item
                  </button>
                </center>
              </form>
            </div>
          </div>
        </div>
        <!-- prettier-ignore -->
        <% }) %>
        <% } %>
      </div>
    </div>
  </body>
</html>
